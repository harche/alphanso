name: "Hello World Example"
max_attempts: 10

agent:
  type: "claude-agent-sdk"
  claude:
    model: "claude-sonnet-4-5-20250929"

# Pre-actions run once before the convergence loop
pre_actions:
  - command: "echo 'Step 1: Setting up environment...'"
    description: "Initialize environment"

  - command: "echo 'Step 2: Creating directories...'"
    description: "Create directories"

  - command: "mkdir -p output"
    description: "Create output directory"

  - command: "echo 'Hello! Current time is ${CURRENT_TIME}' > output/greeting.txt"
    description: "Write greeting file"

  - command: "cat output/greeting.txt"
    description: "Display greeting"

# Validators run in the convergence loop to check conditions
validators:
  - type: "command"
    name: "Check Greeting File Exists"
    command: "test -f output/greeting.txt"
    timeout: 5.0

  - type: "command"
    name: "Verify Greeting Content"
    command: "grep -q 'Hello' output/greeting.txt"
    timeout: 5.0

  - type: "command"
    name: "Check Directory Structure"
    command: "test -d output"
    timeout: 5.0

  - type: "git-conflict"
    name: "Git Conflict Check"
    timeout: 10.0

retry_strategy:
  type: "hybrid"
  max_tracked_failures: 10

working_directory: "."
